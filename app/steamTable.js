const steamTable = [
    [ 0.08871331271285245 , 32.018 ],
    [ 0.10152637654599998 , 35.3858 ],
    [ 0.11603014462399999 , 38.769800000000004 ],
    [ 0.130533912702 , 41.7992 ],
    [ 0.14503768077999998 , 44.546 ],
    [ 0.17404521693599997 , 49.3772 ],
    [ 0.20305275309199997 , 53.5442 ],
    [ 0.23206028924799998 , 57.218 ],
    [ 0.261067825404 , 60.5066 ],
    [ 0.29007536155999997 , 63.491 ],
    [ 0.34809043387199995 , 68.74520000000001 ],
    [ 0.40610550618399993 , 73.28299999999999 ],
    [ 0.46412057849599997 , 77.2844 ],
    [ 0.522135650808 , 80.8736 ],
    [ 0.5801507231199999 , 84.128 ],
    [ 0.6526695635099999 , 87.82159999999999 ],
    [ 0.7251884039 , 91.17320000000001 ],
    [ 0.79770724429 , 94.2458 ],
    [ 0.87022608468 , 97.08619999999999 ],
    [ 0.9427449250699999 , 99.7286 ],
    [ 1.0152637654599999 , 102.2 ],
    [ 1.08778260585 , 104.52199999999999 ],
    [ 1.1603014462399999 , 106.7162 ],
    [ 1.2328202866299998 , 108.79339999999999 ],
    [ 1.3053391270199999 , 110.7698 ],
    [ 1.3778579674099998 , 112.6526 ],
    [ 1.4503768078 , 114.45079999999999 ],
    [ 1.59541448858 , 117.82939999999999 ],
    [ 1.74045216936 , 120.95419999999999 ],
    [ 1.8854898501399997 , 123.8612 ],
    [ 2.0305275309199997 , 126.5846 ],
    [ 2.3206028924799997 , 131.5634 ],
    [ 2.6106782540399998 , 136.03640000000001 ],
    [ 2.9007536156 , 140.1044 ],
    [ 3.48090433872 , 147.29539999999997 ],
    [ 4.061055061839999 , 153.5324 ],
    [ 4.6412057849599995 , 159.0548 ],
    [ 5.2213565080799995 , 164.021 ],
    [ 5.8015072312 , 168.5426 ],
    [ 6.526695635099999 , 173.687 ],
    [ 7.251884038999999 , 178.37059999999997 ],
    [ 7.251884038999999 , 178.37059999999997 ],
    [ 7.977072442899999 , 182.6762 ],
    [ 8.7022608468 , 186.6668 ],
    [ 9.4274492507 , 190.38739999999999 ],
    [ 10.152637654599998 , 193.8776 ],
    [ 10.877826058499998 , 197.16439999999997 ],
    [ 11.6030144624 , 200.2748 ],
    [ 12.328202866299998 , 203.225 ],
    [ 13.053391270199999 , 206.0366 ],
    [ 13.7785796741 , 208.72039999999998 ],
    [ 14.503768077999998 , 211.2908 ],
    [ 15.954144885799998 , 216.1256 ],
    [ 17.4045216936 , 220.6112 ],
    [ 18.8548985014 , 224.79619999999997 ],
    [ 20.305275309199995 , 228.7256 ],
    [ 21.755652116999997 , 232.4282 ],
    [ 23.2060289248 , 235.9346 ],
    [ 24.656405732599996 , 239.26639999999998 ],
    [ 26.106782540399998 , 242.4398 ],
    [ 27.5571593482 , 245.4728 ],
    [ 29.007536155999997 , 248.378 ],
    [ 30.4579129638 , 251.1662 ],
    [ 31.908289771599996 , 253.85 ],
    [ 33.358666579399994 , 256.4348 ],
    [ 34.8090433872 , 258.9296 ],
    [ 36.259420195 , 261.33979999999997 ],
    [ 37.7097970028 , 263.6744 ],
    [ 39.16017381059999 , 265.937 ],
    [ 40.61055061839999 , 268.133 ],
    [ 42.060927426199996 , 270.26599999999996 ],
    [ 43.511304233999994 , 272.33959999999996 ],
    [ 44.9616810418 , 274.3592 ],
    [ 46.4120578496 , 276.3266 ],
    [ 47.862434657399994 , 278.2436 ],
    [ 49.31281146519999 , 280.1156 ],
    [ 50.763188273 , 281.94259999999997 ],
    [ 52.213565080799995 , 283.72819999999996 ],
    [ 53.66394188859999 , 285.4742 ],
    [ 55.1143186964 , 287.18420000000003 ],
    [ 56.56469550419999 , 288.8564 ],
    [ 58.015072311999994 , 290.4944 ],
    [ 58.015072311999994 , 290.4944 ],
    [ 60.9158259276 , 293.675 ],
    [ 63.81657954319999 , 296.73679999999996 ],
    [ 66.71733315879999 , 299.6888 ],
    [ 69.6180867744 , 302.54 ],
    [ 72.51884039 , 305.2958 ],
    [ 75.4195940056 , 307.9652 ],
    [ 78.32034762119999 , 310.55539999999996 ],
    [ 81.22110123679998 , 313.0682 ],
    [ 84.12185485239999 , 315.51079999999996 ],
    [ 87.02260846799999 , 317.8868 ],
    [ 89.9233620836 , 320.2016 ],
    [ 92.8241156992 , 322.457 ],
    [ 95.72486931479999 , 324.65659999999997 ],
    [ 98.62562293039998 , 326.8058 ],
    [ 101.526376546 , 328.90279999999996 ],
    [ 104.42713016159999 , 330.95480000000003 ],
    [ 107.32788377719999 , 332.96 ],
    [ 110.2286373928 , 334.92379999999997 ],
    [ 113.12939100839998 , 336.848 ],
    [ 116.03014462399999 , 338.7308 ],
    [ 118.93089823959998 , 340.57939999999996 ],
    [ 121.8316518552 , 342.392 ],
    [ 124.73240547079999 , 344.1704 ],
    [ 127.63315908639998 , 345.91639999999995 ],
    [ 130.53391270199998 , 347.63 ],
    [ 133.43466631759998 , 349.3166 ],
    [ 136.33541993319997 , 350.9726 ],
    [ 139.2361735488 , 352.60159999999996 ],
    [ 142.1369271644 , 354.2036 ],
    [ 145.03768078 , 355.7804 ],
    [ 152.289564819 , 359.61619999999994 ],
    [ 159.54144885799997 , 363.3116 ],
    [ 166.793332897 , 366.8774 ],
    [ 174.04521693599997 , 370.32259999999997 ],
    [ 181.29710097499998 , 373.65619999999996 ],
    [ 188.54898501399995 , 376.88899999999995 ],
    [ 195.80086905299999 , 380.0246 ],
    [ 203.052753092 , 383.07019999999994 ],
    [ 210.30463713099996 , 386.033 ],
    [ 217.55652117 , 388.9166 ],
    [ 217.55652117 , 388.9166 ],
    [ 224.80840520899997 , 391.7264 ],
    [ 232.06028924799998 , 394.466 ],
    [ 239.31217328699995 , 397.14079999999996 ],
    [ 246.56405732599998 , 399.7526 ],
    [ 253.81594136499996 , 402.30499999999995 ],
    [ 261.06782540399996 , 404.80159999999995 ],
    [ 268.31970944299997 , 407.2442 ],
    [ 275.57159348199997 , 409.6364 ],
    [ 282.823477521 , 411.98179999999996 ],
    [ 290.07536156 , 414.2786 ],
    [ 304.579129638 , 418.7444 ],
    [ 319.08289771599993 , 423.04819999999995 ],
    [ 333.586665794 , 427.20259999999996 ],
    [ 348.09043387199995 , 431.2202 ],
    [ 362.59420194999996 , 435.10999999999996 ],
    [ 377.0979700279999 , 438.8828 ],
    [ 391.60173810599997 , 442.544 ],
    [ 406.105506184 , 446.10259999999994 ],
    [ 420.60927426199993 , 449.56399999999996 ],
    [ 435.11304234 , 452.9354 ],
    [ 449.61681041799994 , 456.2222 ],
    [ 464.12057849599995 , 459.4262 ],
    [ 478.6243465739999 , 462.5564 ],
    [ 493.12811465199997 , 465.61459999999994 ],
    [ 507.6318827299999 , 468.60259999999994 ],
    [ 522.1356508079999 , 471.52759999999995 ],
    [ 536.6394188859999 , 474.3896 ],
    [ 551.1431869639999 , 477.194 ],
    [ 565.646955042 , 479.94259999999997 ],
    [ 580.15072312 , 482.6372 ],
    [ 594.654491198 , 485.2814 ],
    [ 609.158259276 , 487.8752 ],
    [ 623.6620273539999 , 490.424 ],
    [ 638.1657954319999 , 492.926 ],
    [ 652.6695635099999 , 495.3866 ],
    [ 667.173331588 , 497.8039999999999 ],
    [ 681.677099666 , 500.18179999999995 ],
    [ 696.1808677439999 , 502.52359999999993 ],
    [ 710.6846358219999 , 504.82579999999996 ],
    [ 725.1884038999999 , 507.09379999999993 ],
    [ 739.6921719779999 , 509.32579999999996 ],
    [ 754.1959400559998 , 511.5254 ],
    [ 768.6997081339999 , 513.6944 ],
    [ 783.2034762119999 , 515.831 ],
    [ 797.70724429 , 517.9369999999999 ],
    [ 812.211012368 , 520.016 ],
    [ 826.7147804459998 , 522.0644 ],
    [ 841.2185485239999 , 524.0876000000001 ],
    [ 855.7223166019999 , 526.082 ],
    [ 870.22608468 , 528.0529999999999 ],
    [ 884.7298527579999 , 529.9988 ],
    [ 899.2336208359999 , 531.9194 ],
    [ 913.7373889139999 , 533.8165999999999 ],
    [ 928.2411569919999 , 535.6922 ],
    [ 942.7449250699999 , 537.5444 ],
    [ 957.2486931479998 , 539.375 ],
    [ 971.7524612259999 , 541.184 ],
    [ 986.2562293039999 , 542.9732 ],
    [ 1000.7599973819998 , 544.7426 ],
    [ 1015.2637654599998 , 546.4922 ],
    [ 1029.767533538 , 548.222 ],
    [ 1044.2713016159998 , 549.9337999999999 ],
    [ 1058.775069694 , 551.6276 ],
    [ 1073.2788377719999 , 553.3051999999999 ],
    [ 1087.78260585 , 554.963 ],
    [ 1102.2863739279999 , 556.6063999999999 ],
    [ 1116.7901420059998 , 558.2318 ],
    [ 1131.293910084 , 559.841 ],
    [ 1145.7976781619998 , 561.4358 ],
    [ 1160.30144624 , 563.0143999999999 ],
    [ 1174.8052143179998 , 564.5767999999999 ],
    [ 1189.308982396 , 566.1266 ],
    [ 1203.8127504739998 , 567.6601999999999 ],
    [ 1218.316518552 , 569.1812 ],
    [ 1232.82028663 , 570.6878 ],
    [ 1247.3240547079997 , 572.1800000000001 ],
    [ 1261.8278227859998 , 573.6596000000001 ],
    [ 1276.3315908639997 , 575.1266 ],
    [ 1290.8353589419999 , 576.5791999999999 ],
    [ 1305.3391270199998 , 578.0210000000001 ],
    [ 1305.3391270199998 , 578.0210000000001 ],
    [ 1319.8428950979999 , 579.4502 ],
    [ 1334.346663176 , 580.8667999999999 ],
    [ 1348.850431254 , 582.2726 ],
    [ 1363.354199332 , 583.6658 ],
    [ 1377.8579674099997 , 585.0482000000001 ],
    [ 1392.3617354879998 , 586.418 ],
    [ 1406.8655035659997 , 587.7788 ],
    [ 1421.3692716439998 , 589.1288 ],
    [ 1435.873039722 , 590.4662 ],
    [ 1450.3768077999998 , 591.7946 ],
    [ 1479.3843439559998 , 594.4208 ],
    [ 1508.3918801119996 , 597.0074 ],
    [ 1537.3994162679999 , 599.5544 ],
    [ 1566.4069524239999 , 602.0654 ],
    [ 1595.41448858 , 604.5422 ],
    [ 1624.422024736 , 606.9812000000001 ],
    [ 1653.4295608919997 , 609.3878 ],
    [ 1682.4370970479997 , 611.762 ],
    [ 1711.4446332039997 , 614.1038 ],
    [ 1740.45216936 , 616.415 ],
    [ 1769.4597055159998 , 618.6956 ],
    [ 1798.4672416719998 , 620.9492 ],
    [ 1827.4747778279998 , 623.1722 ],
    [ 1856.4823139839998 , 625.3682 ],
    [ 1885.4898501399998 , 627.5372 ],
    [ 1914.4973862959996 , 629.6791999999999 ],
    [ 1943.5049224519998 , 631.796 ],
    [ 1972.5124586079999 , 633.8876 ],
    [ 2001.5199947639996 , 635.9558 ],
    [ 2030.5275309199997 , 637.9988 ],
    [ 2059.535067076 , 640.0201999999999 ],
    [ 2088.5426032319997 , 642.0182 ],
    [ 2117.550139388 , 643.9928 ],
    [ 2146.5576755439997 , 645.9476 ],
    [ 2175.5652117 , 647.8789999999999 ],
    [ 2204.5727478559998 , 649.7905999999999 ],
    [ 2233.5802840119995 , 651.6823999999999 ],
    [ 2262.587820168 , 653.5544 ],
    [ 2291.5953563239996 , 655.4065999999999 ],
    [ 2320.60289248 , 657.239 ],
    [ 2320.60289248 , 657.239 ],
    [ 2349.6104286359996 , 659.0516 ],
    [ 2378.617964792 , 660.848 ],
    [ 2407.6255009479996 , 662.6246 ],
    [ 2436.633037104 , 664.385 ],
    [ 2465.64057326 , 666.1274 ],
    [ 2494.6481094159994 , 667.8517999999999 ],
    [ 2523.6556455719997 , 669.56 ],
    [ 2552.6631817279995 , 671.252 ],
    [ 2581.6707178839997 , 672.9278 ],
    [ 2610.6782540399995 , 674.5856 ],
    [ 2639.6857901959997 , 676.2307999999999 ],
    [ 2668.693326352 , 677.858 ],
    [ 2697.700862508 , 679.4708 ],
    [ 2726.708398664 , 681.0691999999999 ],
    [ 2755.7159348199993 , 682.6514 ],
    [ 2784.7234709759996 , 684.2192 ],
    [ 2813.7310071319994 , 685.7744 ],
    [ 2842.7385432879996 , 687.3134 ],
    [ 2871.746079444 , 688.838 ],
    [ 2900.7536155999996 , 690.3482 ],
    [ 2929.761151756 , 691.8458 ],
    [ 2958.7686879119997 , 693.3272 ],
    [ 2987.776224068 , 694.796 ],
    [ 3016.7837602239993 , 696.2485999999999 ],
    [ 3045.7912963799995 , 697.6886 ],
    [ 3074.7988325359997 , 699.1142 ],
    [ 3103.8063686919995 , 700.5236 ],
    [ 3132.8139048479998 , 701.9204 ],
    [ 3161.8214410039996 , 703.3028 ],
    [ 3190.82897716 , 704.669 ],
    [ 3200.1113887299193 , 705.1028 ]
]

// console.log(steamTable[steamTable.length - 1]);

function getSaturationTemperature(pressure) {
    // Find nearest lower and upper pressure points in the steam table
    let lowerIndex = 0;
    let upperIndex = steamTable.length - 1;

    // Edge case: if pressure is below the lowest in the table
    if (pressure <= steamTable[0][0]) {
        return steamTable[0][1]; // Return the lowest temperature
    }

    // Edge case: if pressure is above the highest in the table
    if (pressure >= steamTable[upperIndex][0]) {
        return steamTable[upperIndex][1]; // Return the highest temperature
    }

    // Binary search for the lower index
    while (lowerIndex < upperIndex - 1) {
        let midIndex = Math.floor((lowerIndex + upperIndex) / 2);
        if (steamTable[midIndex][0] < pressure) {
            lowerIndex = midIndex;
        } else {
            upperIndex = midIndex;
        }
    }

    // Perform double interpolation
    const P1 = steamTable[lowerIndex][0];
    const P2 = steamTable[upperIndex][0];
    const T1 = steamTable[lowerIndex][1];
    const T2 = steamTable[upperIndex][1];

    // Linear interpolation in pressure
    const interpolationPressure = T1 + (pressure - P1) * (T2 - T1) / (P2 - P1);

    return interpolationPressure;
}

module.exports = {
    getSaturationTemperature
};